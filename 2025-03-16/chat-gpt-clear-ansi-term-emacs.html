<!DOCTYPE html><html class="dark"><head>  <meta charset="utf-8"/>  <title>Chat GPT: Clear ansi-term Emacs</title>  <meta name="generator" content="chatGPT Saving Bookmark"/><style>*, :after, :before {  border: 0 solid #d9d9e3;  box-sizing: border-box;}body > .flex-col {  max-width: 50rem;  margin: 0 auto;}html.dark {  background-color: rgb(32,33,35);  color: rgb(236,236,241);  --message-surface: rgba(50, 50, 50, .85);  --sidebar-surface-primary: #171717;  --border-medium: hsla(0, 0%, 100%, .15);}html.light {  background-color: white;  color: rgb(52,53,65);  --message-surface: rgba(200, 200, 200, .85);  --sidebar-surface-primary: #f9f9f9;  --text-secondary: #5d5d5d;  --border-medium: rgba(0, 0, 0, .15);}.dark body > header {    border-bottom: 1px solid rgba(32,33,35,.5);}body {  font-size: 16px;  font-family: sans-serif;  line-height: 28px;  margin: 0;}body > .w-full {  padding: 30px;}.flex {  display: flex;  max-width: 100%;}p:first-child {  margin-top: 0;}.m-auto {  margin: auto;}.text-base {  max-width: 50rem;}.gap-1 {  gap: 0.25rem;}/* model name */.justify-center {  justify-content: center;}.justify-between {  justify-content: space-between;}.items-center {  align-items: center;}.w-4 {  width: 1rem;}.h-4 {  height: 1rem;}.w-8 {  width: 2rem;}.h-8 {  height: 2rem;}/* code */.dark\:bg-token-main-surface-secondary:is(.dark *) {  background: #2f2f2f;}.text-token-text-secondary {  color: var(--text-secondary);}.bg-token-sidebar-surface-primary {  background-color: var(--sidebar-surface-primary);}.rounded-t-\[5px\] {  border-radius: 5px 5px 0 0;}.border-\[0\.5px\], .border-\[\.5px\] {  border-width: .5px;}.dark\:prose-invert:is(.dark *) :where(code):not(:where([class~=not-prose] *)) {  background-color: #424242;}.dark\:prose-invert:is(.dark *) :where(pre):not(:where([class~=not-prose] *)) code {  background: transparent;}.prose :where(code):not(:where([class~=not-prose] *)) {  background-color: #ececec;  border-radius: 3px;  font-weight: 500;  padding: 2px 4px;}.dark\:prose-invert:is(.dark *) :where(code):not(:where([class~=not-prose] *)) {  background-color: #424242;}.border-token-border-medium {  border-color: var(--border-medium);}/* prompt */.bg-token-message-surface {  background-color: var(--message-surface);  padding: 10px 20px;  border-radius: 10px;  max-width: 70%;}/* response */.dark body > .w-full:nth-of-type(2n+2) {  background: rgb(68,70,84);}.light body > .w-full:nth-of-type(2n+2) {  background: rgb(247,247,248);}.light body > .w-full {  border-bottom: 1px solid rgba(0,0,0,.1);}a, a:visited {  color: #7792cd;}pre {  margin: 0 0 1em 0;  display: block;}pre code.hljs {  margin-bottom: 1em;  border-radius: 5px;}.whitespace-pre-wrap {  white-space: pre-wrap;}.flex-col {  flex-direction: column;}table {  border-collapse: collapse;  border-color: inherit;  text-indent: 0;}.markdown table {  --tw-border-spacing-x: 0px;  --tw-border-spacing-y: 0px;  border-collapse: separate;  border-spacing: var(--tw-border-spacing-x) var(--tw-border-spacing-y);  width: 100%}.markdown th {  background-color: rgba(236,236,241,.2);  border-bottom-width: 1px;  border-left-width: 1px;  border-top-width: 1px;  padding: .25rem .75rem}.markdown th:first-child {  border-top-left-radius: .375rem}.markdown th:last-child {  border-right-width: 1px;  border-top-right-radius: .375rem}.markdown td {  border-bottom-width: 1px;  border-left-width: 1px;  padding: .25rem .75rem}.markdown td:last-child {  border-right-width: 1px}.markdown tbody tr:last-child td:first-child {  border-bottom-left-radius: .375rem}.markdown tbody tr:last-child td:last-child {  border-bottom-right-radius: .375rem}/* chatGPT code color theme */code.hljs,code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;overflow:auto}:not(pre)>code.hljs,:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.hljs-comment{color:hsla(0,0%,100%,.5)}.hljs-meta{color:hsla(0,0%,100%,.6)}.hljs-built_in,.hljs-class .hljs-title{color:#e9950c}.hljs-doctag,.hljs-formula,.hljs-keyword,.hljs-literal{color:#2e95d3}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#00a67d}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#df3079}.hljs-bullet,.hljs-link,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#f22c3d}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#a9aec1}.token.punctuation{color:#fefefe}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#abe338}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.important,.token.regex{color:gold}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast:active){code[class*=language-],pre[class*=language-]{background:window;color:windowText}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:400}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:700}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:400}}/* avatars */.w-6 {  width: 1.5rem;}.h-6 {  height: 1.5rem;}.p-1 {  padding: 0.25rem;}.w-\[30px\] {  width: 30px;  min-width: 30px;}.h-\[30px\] {  height: 30px;}.empty\:hidden img {  max-width: 100%;}.w-full .items-end + div {  width: calc(100% - 115px);}.items-end {  align-items: flex-end;}.py-\[18px\] {  padding-bottom: 18px;  padding-top: 18px;}.w-full {  width: 100%;}/* code intepreter */body > header {  transform: none !important;}.bg-gray-100 {  background-color: rgba(236,236,241,1);}.text-gray-900 {  color: rgba(32,33,35,1);}.p-3 {  padding: 0.75rem;}.gap-3 {  gap: 0.75rem;}.text-xs {  font-size: .75rem;  line-height: 1rem;}.rounded {  border-radius: 0.25rem;}.items-start {  align-items: flex-start;}.flex-col {  flex-direction: column;}.text-white {  color: rgba(255,255,255,1);}.bg-gray-500 {  background-color: rgba(142,142,160,1);}.rounded-l-md {  border-bottom-left-radius: 0.375rem;  border-top-left-radius: 0.375rem;}.font-medium {  font-weight: 500;}.py-2 {  padding-bottom: 0.5rem;  padding-top: 0.5rem;}.px-3 {  padding-left: 0.75rem;  padding-right: 0.75rem;}.px-2 {  padding-left: 0.5rem;  padding-right: 0.5rem;}.bg-gray-50 {  background-color: rgba(247,247,248,1);}.rounded-r-md {  border-bottom-right-radius: 0.375rem;  border-top-right-radius: 0.375rem;}.self-stretch {  align-self: stretch;}.mt-3 {  margin-top: 0.75rem;}.text-xs {  font-size: .75rem;  line-height: 1rem;}.prose {  font-size: 1rem;  line-height: 1.75;}/* user avatar don't have p tag with margin */body > .w-full:nth-of-type(2n+1) .items-end {  margin-top: 0;}/* style of the code snippets */.rounded-md {  border-radius: 0.375rem;}.mb-4 {  margin-bottom: 1rem;}.p-4 {  padding: 1rem;}.py-2 {  padding-bottom: 0.5rem;  padding-top: 0.5rem;}.px-4 {  padding-left: 1rem;  padding-right: 1rem;}.text-xs {  font-size: .75rem;  line-height: 1rem;}.bg-black {  background-color: rgb(0,0,0);}.text-gray-200 {  color: rgb(217,217,227);}.bg-gray-800 {  background-color: rgba(52,53,65);}.rounded-t-md {  border-top-left-radius: 0.375rem;  border-top-right-radius: 0.375rem;}.prose :where(code):not(:where([class~=not-prose] *)) {  color: var(--tw-prose-code);  font-size: .875em;  font-weight: 600;}.prose :where(pre):not(:where([class~=not-prose] *)) {  background-color: transparent;  border-radius: 0.375rem;  color: currentColor;  font-size: .875em;  font-weight: 400;  line-height: 1.7142857;  margin: 0;  overflow-x: auto;  padding: 0;}.prose :where(pre code):not(:where([class~=not-prose] *)) {  background-color: transparent;  border-radius: 0;  border-width: 0;  color: inherit;  font-family: inherit;  font-size: inherit;  font-weight: inherit;  line-height: inherit;  padding: 0;}.\!whitespace-pre {  white-space: pre!important;}.overflow-y-auto {  overflow-y: auto;}.toggle {  position: fixed;  top: 5px;  right: 5px;  font-size: 16px;  line-height: 1.2em;}#toggle {  display: none;}#toggle + label::before {  content: "‚òÄÔ∏è";  background: black;  display: block;  box-sizing: border-box;  width: 28px;  height: 28px;  padding: 4px 3px;  border: 1px solid white;  border-radius: 50%;}#toggle:checked + label::before {  content: "üåô";}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"/></head><body><span class="mt-1.5 flex flex-col text-sm md:pb-9"><article class="group/turn w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]" dir="auto" data-testid="conversation-turn-2" data-scroll-anchor="false"><div class="text-base my-auto mx-auto py-[18px] px-6"><div class="mx-auto flex flex-1 text-base gap-4 md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"><div class="group/conversation-turn relative flex w-full min-w-0 flex-col @xs/thread:px-0 @sm/thread:px-1.5 @md/thread:px-4"><div class="flex-col gap-1 md:gap-3"><div class="flex max-w-full flex-col flex-grow"><div data-message-author-role="user" data-message-id="860e4c10-3a4f-4a11-b5f2-469fc96656fc" dir="auto" class="min-h-8 text-message relative flex w-full flex-col items-end gap-2 whitespace-normal break-words text-start [.text-message+&amp;]:mt-5"><div class="w-full"><div class="flex w-full flex-col gap-1 empty:hidden items-end rtl:items-start"><div class="relative max-w-[var(--user-chat-width,70%)] rounded-3xl bg-token-message-surface px-5 py-2.5"><div class="whitespace-pre-wrap">Do you know how to clear ansi term in Emacs so it actually clear the terminal and not change the scroll position?</div><div class="absolute bottom-0 right-full top-0 -mr-3.5 hidden pr-5 pt-2 [.group\/conversation-turn:hover_&amp;]:flex"><div class="flex"></div></div></div></div></div></div></div></div></div></div></div></article><article class="group/turn w-full text-token-text-primary focus-visible:outline-2 focus-visible:outline-offset-[-4px]" dir="auto" data-testid="conversation-turn-3" data-scroll-anchor="true"><div class="text-base my-auto mx-auto py-[18px] px-6"><div class="mx-auto flex flex-1 text-base gap-4 md:gap-5 lg:gap-6 md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]"><div class="group/conversation-turn relative flex w-full min-w-0 flex-col agent-turn @xs/thread:px-0 @sm/thread:px-1.5 @md/thread:px-4"><div class="flex-col gap-1 md:gap-3"><div class="flex max-w-full flex-col flex-grow"><div data-message-author-role="assistant" data-message-id="53361d3c-7dc4-4bbd-8feb-d329a20a01b0" dir="auto" class="min-h-8 text-message relative flex w-full flex-col items-end gap-2 whitespace-normal break-words text-start [.text-message+&amp;]:mt-5" data-message-model-slug="gpt-4o"><div class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"><div class="markdown prose w-full break-words dark:prose-invert dark"><p data-start="0" data-end="289">Yes, in Emacs‚Äô <code data-start="15" data-end="26">ansi-term</code> mode, when you try to clear the screen using <code data-start="72" data-end="79">clear</code> or <code data-start="83" data-end="91">Ctrl+L</code>, it typically just inserts blank lines instead of actually resetting the terminal display. To properly clear the terminal without affecting the scroll position, try one of the following approaches:</p>
<h3 data-start="291" data-end="314">1. Use <code data-start="302" data-end="314">tput reset</code></h3>
<p data-start="315" data-end="345">Run this inside <code data-start="331" data-end="342">ansi-term</code>:</p>
<pre class="!overflow-visible" data-start="346" data-end="366"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none rounded-t-[5px]">sh</div><div class="sticky top-9"><div class="absolute bottom-0 right-0 flex h-9 items-center pr-2"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-sh"><span><span>tput reset
</span></span></code></div></div></pre>
<p data-start="367" data-end="446">This sends a proper terminal reset sequence that should fully clear the screen.</p>
<h3 data-start="448" data-end="493">2. Use <code data-start="459" data-end="467">printf</code> with the ANSI Escape Code</h3>
<pre class="!overflow-visible" data-start="494" data-end="518"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none rounded-t-[5px]">sh</div><div class="sticky top-9"><div class="absolute bottom-0 right-0 flex h-9 items-center pr-2"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-sh"><span><span><span class="hljs-built_in">printf</span></span><span> </span><span><span class="hljs-string">"\033c"</span></span><span>
</span></span></code></div></div></pre>
<p data-start="519" data-end="584">This sends the <code data-start="534" data-end="541">ESC c</code> sequence, which performs a terminal reset.</p>
<h3 data-start="586" data-end="624">3. Use <code data-start="597" data-end="624">clear &amp;&amp; echo -en "\e[3J"</code></h3>
<pre class="!overflow-visible" data-start="625" data-end="660"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none rounded-t-[5px]">sh</div><div class="sticky top-9"><div class="absolute bottom-0 right-0 flex h-9 items-center pr-2"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-sh"><span><span>clear &amp;&amp; </span><span><span class="hljs-built_in">echo</span></span><span> -en </span><span><span class="hljs-string">"\e[3J"</span></span><span>
</span></span></code></div></div></pre>
<p data-start="661" data-end="749">The <code data-start="665" data-end="672">\e[3J</code> ensures the terminal history is wiped instead of just inserting blank lines.</p>
<h3 data-start="751" data-end="780">4. Create a Shell Alias</h3>
<p data-start="781" data-end="868">If you're using Bash or Zsh inside <code data-start="816" data-end="827">ansi-term</code>, add this to your <code data-start="846" data-end="855">.bashrc</code> or <code data-start="859" data-end="867">.zshrc</code>:</p>
<pre class="!overflow-visible" data-start="869" data-end="916"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none rounded-t-[5px]">sh</div><div class="sticky top-9"><div class="absolute bottom-0 right-0 flex h-9 items-center pr-2"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-sh"><span><span><span class="hljs-built_in">alias</span></span><span> cls=</span><span><span class="hljs-string">'clear &amp;&amp; echo -en "\e[3J"'</span></span><span>
</span></span></code></div></div></pre>
<p data-start="917" data-end="957">Then, just run <code data-start="932" data-end="937">cls</code> inside <code data-start="945" data-end="956">ansi-term</code>.</p>
<p data-start="959" data-end="1044" data-is-last-node="" data-is-only-node="">Would you like a more Emacs Lisp-based solution, or does this work for your use case?</p></div></div></div></div><div tabindex="0" class="mb-2 flex gap-3 -ml-2"><div class="flex items-center justify-start rounded-xl p-1"><div style="opacity: 1; will-change: auto;"><div class="flex items-center transition-opacity group-hover/turn:opacity-100 opacity-100"><div class="flex"></div></div></div></div></div><div class="mt-3 w-full empty:hidden"></div></div></div></div></div></article></span><div class="toggle"><input id="toggle" type="checkbox" checked /><label for="toggle"></label></div><script>function decode(array) {  const ua = new Uint8Array(array);  return URL.createObjectURL(new Blob([ua], {type : "image/jpeg"}));}const content_images = [].map(decode);document.querySelectorAll('img').forEach(img => {   if (img.matches('.empty\\:hidden > img')) {     const uri = content_images.shift();     img.src = uri;   }});toggle.addEventListener('change', () => {    const className = toggle.checked ? 'dark' : 'light';    document.documentElement.className = className;});</script></body></html>